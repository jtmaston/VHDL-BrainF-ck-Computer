<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-01-05T03:15:33.3964766"><title>Architecture | BrainFck Computer</title><script type="application/json" id="virtual-toc-data">[{"id":"call-me-ishmael","level":0,"title":"Call me Ishmael...","anchor":"#call-me-ishmael"},{"id":"cells","level":0,"title":"Cells:","anchor":"#cells"},{"id":"memory-management-unit-mmu","level":0,"title":"Memory Management Unit (MMU):","anchor":"#memory-management-unit-mmu"},{"id":"arithmetic-logic-unit-alu","level":0,"title":"Arithmetic Logic Unit (ALU):","anchor":"#arithmetic-logic-unit-alu"},{"id":"input-output-device","level":0,"title":"Input-output device:","anchor":"#input-output-device"},{"id":"i2c-debug-interface","level":0,"title":"I2C debug interface:","anchor":"#i2c-debug-interface"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Architecture | BrainFck Computer"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="BrainFck Computer Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation//0.1/1-architecture.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Architecture | BrainFck Computer"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation//0.1/1-architecture.html#webpage",
    "url": "writerside-documentation//0.1/1-architecture.html",
    "name": "Architecture | BrainFck Computer",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "BrainFck Computer Help"
}</script><!-- End Schema.org --></head><body data-id="1-Architecture" data-main-title="Architecture" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>BrainFck Computer 0.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="1-Architecture" id="1-Architecture.md">Architecture</h1><section class="chapter"><h2 id="call-me-ishmael" data-toc="call-me-ishmael">Call me Ishmael...</h2><p id="tt4wei_9">Or something about taking on a Big Whale. When starting something like this, it's always a good idea to create an architecture, a starting point which you'll use in developing for the platform. In my case, I'm a big fan of diagrams, so, here goes...</p><figure id="tt4wei_10"><img alt="diagram.svg" src="images/diagram.svg" title="diagram.svg" width="718" height="329"></figure><p id="tt4wei_11">Let's take things top-to-bottom-left-to-right:</p></section><section class="chapter"><h2 id="cells" data-toc="cells">Cells:</h2><p id="tt4wei_12">The &quot;cells&quot; represent the basis of the memory subsystem. Based on them, we are able to store data and recall program sequences. Ideally, they should be 8-bit wide, since that is what we are aiming with our core. This representation is... a bit of an abstraction, granted. As you may gather, the RAM is supposed to be fast, volatile, however the problem arises when we have to take into account program data. We might want to use this BF processor in... a microcontroller application! Picture this, BF controlling your entire house, now that's home automation. And loading the program each time on boot... that just won't fly.</p><p id="tt4wei_13">Therefore, nonvolatile cells (stored on an SPI-accessed uSD) and their volatile counterpart (stored in the FPGA itself) are the base of this module. I noted them as being SPI-ish, but I might just end up making it just fully SPI compatible, depends on how generous I'm feeling.</p><p id="tt4wei_14">In this regard, I see two possibilities: - SPI to uSD, parallel interface to each cell. Pros, easy to implement for each cell (already done), big throughput (since that's a big concern, ya know?). Cons, two separate interfaces must be implemented on the MMU. On the flip side, it complies to the Harvard target of this project. - SPI to uSD, SPI to each cell. Pros, just one controller can handle everything. Cons... Completely violates the Harvard principle, and might be more difficult to synchronize.</p></section><section class="chapter"><h2 id="memory-management-unit-mmu" data-toc="memory-management-unit-mmu">Memory Management Unit (MMU):</h2><p id="tt4wei_15">This houses the SPI controller and its parallel counterpart. I see it as being a coprocessor, able to fetch instructions requested by the ALU and tossing the results back into flash / RAM. This is where the bulk of the interface / driver code will live, as it is quite difficult to communicate with raw NAND flash as it is. But we'll see.</p></section><section class="chapter"><h2 id="arithmetic-logic-unit-alu" data-toc="arithmetic-logic-unit-alu">Arithmetic Logic Unit (ALU):</h2><p id="tt4wei_16">Performs calculations, branching etc. This is where the various &quot;pointers&quot; associated with BF live (the program pointer, and maybe some scratch calculation registers). Opcodes are implemented here.</p></section><section class="chapter"><h2 id="input-output-device" data-toc="input-output-device">Input-output device:</h2><p id="tt4wei_17">Connects to the user's computer, allows for program loading. Nothing too grand here. Most likely will be done via the built-in FTDI, or the ULX3S's ESP32.</p></section><section class="chapter"><h2 id="i2c-debug-interface" data-toc="i2c-debug-interface">I2C debug interface:</h2><p id="tt4wei_18">This is a good plan to aid in debugging, being able to examine parts of the architecture live, as the &quot;core&quot; is running. I've chosen I2C since it is crazy simple to implement, and allows for synchronization.</p></section><div class="last-modified">Last modified: 05 January 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="overview.html" class="navigation-links__prev">Project overview</a><a href="3-remembering-is-hard.html" class="navigation-links__next">Decoding memories is hard!</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.js"></script></body></html>