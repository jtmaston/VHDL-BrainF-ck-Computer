<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Brainf*ck computer: 1. Project overview / devlog table of contents</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="bflogo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Brainf*ck computer<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">A silly little BF-running computer based on the Lattice ECP5 FPGA, as a learning project to understand VHDL</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><ol type="1">
<li>Project overview / devlog table of contents </li>
</ol>
</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="introduction"></a>
1. Call me Ishmael...</h1>
<p>Or something about taking on a Big Whale. When starting something like this, it's always a good idea to create an architecture, a starting point which you'll use in developing for the platform. In my case, I'm a big fan of diagrams, so, here goes... </p><div class="image">
<object type="image/svg+xml" data="diagram.svg" style="pointer-events: none;"></object>
</div>
<p>Let's take things top-to-bottom-left-to-right:</p>
<p>Cells:</p><ul>
<li>The "cells" represent the basis of the memory subsystem. Based on them, we are able to store data and recall program sequences. Ideally, they should be 8-bit wide, since that is what we are aiming with our core. This representation is... a bit of an abstraction, granted. As you may gather, the <a class="el" href="class_r_a_m.html">RAM</a> is supposed to be fast, volatile, however the problem arises when we have to take into account program data. We might want to use this BF processor in... a microcontroller application! Picture this, BF controlling your entire house, now that's home automation. And loading the program each time on boot... that just won't fly. Therefore, nonvolatile cells (stored on an SPI-accessed uSD) and their volatile counterpart (stored in the FPGA itself) are the base of this module. I noted them as being SPI-ish, but I might just end up making it just fully SPI compatible, depends on how generous I'm feeling. In this regard, I see two possibilities:<ul>
<li>SPI to uSD, parallel interface to each cell. Pros, easy to implement for each cell (already done), big throughput (since that's a big concern, ya know?). Cons, two separate interfaces must be implemented on the MMU. On the flip side, it complies to the Harvard target of this project.</li>
<li>SPI to uSD, SPI to each cell. Pros, just one controller can handle everything. Cons... Completely violates the Harvard principle, and might be more difficult to synchronize.</li>
</ul>
</li>
</ul>
<p>Memory Management Unit (MMU):</p><ul>
<li>This houses the SPI controller and its parallel counterpart. I see it as being a coprocessor, able to fetch instructions requested by the ALU and tossing the results back into flash / <a class="el" href="class_r_a_m.html">RAM</a>. This is where the bulk of the interface / driver code will live, as it is quite difficult to communicate with raw NAND flash as it is. But we'll see.</li>
</ul>
<p>Arithmetic Logic Unit (ALU):</p><ul>
<li>Performs calculations, branching etc. This is where the various "pointers" associated with BF live (the program pointer, and maybe some scratch calculation registers). Opcodes are implemented here.</li>
</ul>
<p>Input-output device:</p><ul>
<li>Connects to the user's computer, allows for program loading. Nothing too grand here. Most likely will be done via the built-in FTDI, or the ULX3S's ESP32.</li>
</ul>
<p>I2C debug interface:</p><ul>
<li>This is a good plan to aid in debugging, being able to examine parts of the architecture live, as the "core" is running. I've chosen I2C since it is crazy simple to implement, and allows for synchronization.</li>
</ul>
<h1><a class="anchor" id="buildingMemory"></a>
2. Try and remember...</h1>
<p><br  />
 The first task: build <a class="el" href="class_r_a_m.html">RAM</a> and <a class="el" href="class_r_o_m.html">ROM</a> cells. Find them here: memoryTrip </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.1 </li>
  </ul>
</div>
</body>
</html>
